<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>All Downloader (Direct Video URL)</title>
<style>
  body { font-family: Arial, sans-serif; max-width: 600px; margin: 40px auto; padding: 0 20px; }
  input[type=text] { width: 80%; padding: 10px; }
  button { padding: 10px 15px; }
  video { max-width: 100%; margin-top: 20px; }
  .download-links { margin-top: 20px; }
  .error { color: red; }
</style>
</head>
<body>
  <h2>All Downloader (Direct Video Link)</h2>
  <input id="urlInput" type="text" placeholder="সরাসরি ভিডিও লিংক দিন" />
  <button onclick="fetchVideo()">ডাউনলোড করুন</button>

  <div id="result"></div>

<script>
async function fetchVideo() {
  const url = document.getElementById('urlInput').value.trim();
  const resultDiv = document.getElementById('result');
  resultDiv.innerHTML = '';

  if (!url) {
    resultDiv.innerHTML = '<p class="error">দয়া করে ভিডিও লিংক দিন।</p>';
    return;
  }

  try {
    const apiUrl = 'https://masterapi.fun/api/alldl?url=' + encodeURIComponent(url);
    const response = await fetch(apiUrl);
    if (!response.ok) throw new Error('API request failed');

    const data = await response.json();

    // ধরছি API রেসপন্সে ডাউনলোডের জন্য URLs আছে data.urls
    if (data && data.urls && data.urls.length > 0) {
      let linksHTML = '';
      data.urls.forEach((item, i) => {
        linksHTML += `<p>Option ${i + 1}: <a href="${item.url}" target="_blank" download>Download</a></p>`;
      });

      // প্রথম ভিডিও URL দিয়ে ভিডিও দেখানো
      const firstVideoUrl = data.urls[0].url;

      resultDiv.innerHTML = `
        <video controls src="${firstVideoUrl}"></video>
        <div class="download-links">${linksHTML}</div>
      `;
    } else {
      resultDiv.innerHTML = '<p class="error">ভিডিও বা ডাউনলোড লিংক পাওয়া যায়নি।</p>';
    }
  } catch (err) {
    resultDiv.innerHTML = `<p class="error">এরর: ${err.message}</p>`;
  }
}
</script>
</body>
</html>
